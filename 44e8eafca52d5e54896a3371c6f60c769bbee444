{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0a0a91c9_7b11327c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 19
      },
      "writtenOn": "2022-12-21T14:01:29Z",
      "side": 1,
      "message": "How do I create my own plugin and how to establish system plugins? (I am sure, I knew - but I forgot.)",
      "revId": "44e8eafca52d5e54896a3371c6f60c769bbee444",
      "serverId": "626241b7-b7d0-4197-b843-1ee23887649c"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "43ac0463_d0254f59",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 19
      },
      "writtenOn": "2023-01-18T09:19:51Z",
      "side": 1,
      "message": "By Helge:\n\n1. Start Kustvakt-full with\n   $ java -jar target/Kustvakt-full-0.xy.jar \\\n     --spring-config local-config-sqlite.xml\n2. Register plugins using either the Kustvakt web service or Kalamar\n   Example:\n\n   $ curl -v -H \"Content-Type: application/json\" -H \u0027Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ\u003d\u0027 -d \u0027{\"name\":\"Test_test\",\"type\":\"CONFIDENTIAL\",\"description\":\" a plugin\",\"url\":\"http://ids-mannheim.de\", \"redirect_uri\":\"http://ids-mannheim.de/redirect\",\"refresh_token_expiry\" : 7776000,\"source\": {\"name\" : \"Test_test\",\"desc\" : \"Test for the plugin managment\", \"embed\" : [{ \"panel\" : \"match\",\"title\" : \"exports KWICs and snippets\", \"icon\" : \"\\uf019\",\"classes\" : [\"button-icon\", \"plugin\" ],  \"onClick\" : {\"action\" : \"addWidget\", \"template\" : \"http://localhost:7777/export\", \"permissions\":[\"forms\",\"scripts\",\"downloads\"] } }] } }\u0027 http://localhost:8089/api/v1.0/oauth2/client/register\n\n3. Replace :memory: in Kustvakt/full/test-jdbc.properties with a DB name.\n4. Set is_permitted in SQLite DB to 1",
      "revId": "44e8eafca52d5e54896a3371c6f60c769bbee444",
      "serverId": "626241b7-b7d0-4197-b843-1ee23887649c"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "079240a9_05c68f78",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 19
      },
      "writtenOn": "2023-01-27T09:09:49Z",
      "side": 1,
      "message": "I tried it by just running full and investigating the generated db - because I have no clue where to put the spring conf. But it seems the example ldap is not loaded properly, so I can\u0027t log in.",
      "parentUuid": "43ac0463_d0254f59",
      "revId": "44e8eafca52d5e54896a3371c6f60c769bbee444",
      "serverId": "626241b7-b7d0-4197-b843-1ee23887649c"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7513bc5b_2a78c1e3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 19
      },
      "writtenOn": "2023-01-27T09:09:49Z",
      "side": 1,
      "message": "Sorry - forget to submit the draft.",
      "revId": "44e8eafca52d5e54896a3371c6f60c769bbee444",
      "serverId": "626241b7-b7d0-4197-b843-1ee23887649c"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "47469dc7_76c9f992",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 19
      },
      "writtenOn": "2023-01-27T13:29:40Z",
      "side": 1,
      "message": "After discussing the client list with Eliza, I expect this usage to be wrong as well.\n\nhttps://github.com/KorAP/Kustvakt/wiki/Plugin-List says, it only returns the plugins registered by the user - it doesn\u0027t list all plugins. Is that right?",
      "revId": "44e8eafca52d5e54896a3371c6f60c769bbee444",
      "serverId": "626241b7-b7d0-4197-b843-1ee23887649c"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2a981583_95eba52e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 19
      },
      "writtenOn": "2023-02-07T14:58:47Z",
      "side": 1,
      "message": "local-config-sqlite.xml may be located in\n- KorAP/Kustvakt/full/conf\n- src/main/resources/\n\nContent is probably something along the lines of:\n\n\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n\u003cbeans xmlns:xsi\u003d\"http://www.w3.org/2001/XMLSchema-instance\"\n\txmlns:p\u003d\"http://www.springframework.org/schema/p\" xmlns:util\u003d\"http://www.springframework.org/schema/util\"\n\txmlns:aop\u003d\"http://www.springframework.org/schema/aop\" xmlns:tx\u003d\"http://www.springframework.org/schema/tx\"\n\txmlns\u003d\"http://www.springframework.org/schema/beans\" xmlns:context\u003d\"http://www.springframework.org/schema/context\"\n\txmlns:cache\u003d\"http://www.springframework.org/schema/cache\"\n\txsi:schemaLocation\u003d\"http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\n           http://www.springframework.org/schema/tx\n           http://www.springframework.org/schema/tx/spring-tx-4.0.xsd\n           http://www.springframework.org/schema/aop\n           http://www.springframework.org/schema/aop/spring-aop-4.0.xsd\n           http://www.springframework.org/schema/context\n           http://www.springframework.org/schema/context/spring-context-4.0.xsd\n           http://www.springframework.org/schema/util\n           http://www.springframework.org/schema/util/spring-util-4.0.xsd\"\u003e\n\n\t\u003ccontext:component-scan base-package\u003d\"de.ids_mannheim.korap\" /\u003e\n\t\u003ccontext:annotation-config /\u003e\n\n\t\u003cbean id\u003d\"props\"\n\t\tclass\u003d\"org.springframework.beans.factory.config.PropertiesFactoryBean\"\u003e\n\t\t\u003cproperty name\u003d\"ignoreResourceNotFound\" value\u003d\"true\" /\u003e\n\t\t\u003cproperty name\u003d\"locations\"\u003e\n\t\t\t\u003carray\u003e\n\t\t\t\t\u003cvalue\u003eclasspath:kustvakt.conf\u003c/value\u003e\n\t\t\t\t\u003cvalue\u003efile:./kustvakt.conf\u003c/value\u003e\n\t\t\t\u003c/array\u003e\n\t\t\u003c/property\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"placeholders\"\n\t\tclass\u003d\"org.springframework.context.support.PropertySourcesPlaceholderConfigurer\"\u003e\n\t\t\u003cproperty name\u003d\"ignoreResourceNotFound\" value\u003d\"true\" /\u003e\n\t\t\u003cproperty name\u003d\"locations\"\u003e\n\t\t\t\u003carray\u003e\n\t\t\t\t\u003cvalue\u003eclasspath:test-jdbc.properties\u003c/value\u003e\n\t\t\t\t\u003cvalue\u003efile:./test-jdbc.properties\u003c/value\u003e\n\t\t\t\t\u003cvalue\u003eclasspath:properties/mail.properties\u003c/value\u003e\n\t\t\t\t\u003cvalue\u003efile:./mail.properties\u003c/value\u003e\n\t\t\t\t\u003cvalue\u003eclasspath:hibernate.properties\u003c/value\u003e\n\n\t\t\t\t\u003cvalue\u003eclasspath:kustvakt.conf\u003c/value\u003e\n\t\t\t\t\u003cvalue\u003efile:./kustvakt.conf\u003c/value\u003e\n\t\t\t\u003c/array\u003e\n\t\t\u003c/property\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\u0027cacheManager\u0027 class\u003d\u0027org.springframework.cache.ehcache.EhCacheCacheManager\u0027\n\t\tp:cacheManager-ref\u003d\u0027ehcache\u0027 /\u003e\n\n\t\u003cbean id\u003d\u0027ehcache\u0027\n\t\tclass\u003d\u0027org.springframework.cache.ehcache.EhCacheManagerFactoryBean\u0027\n\t\tp:configLocation\u003d\u0027classpath:ehcache.xml\u0027 p:shared\u003d\u0027true\u0027 /\u003e\n\n\t\u003c!--class\u003d\"org.apache.commons.dbcp2.BasicDataSource\" --\u003e\n\t\u003c!-- org.springframework.jdbc.datasource.SingleConnectionDataSource --\u003e\n\t\u003cbean id\u003d\"dataSource\" class\u003d\"org.apache.commons.dbcp2.BasicDataSource\"\n\t\tlazy-init\u003d\"true\"\u003e\n\t\t\u003cproperty name\u003d\"driverClassName\" value\u003d\"${jdbc.driverClassName}\" /\u003e\n\t\t\u003cproperty name\u003d\"url\" value\u003d\"${jdbc.url}\" /\u003e\n\t\t\u003cproperty name\u003d\"username\" value\u003d\"${jdbc.username}\" /\u003e\n\t\t\u003cproperty name\u003d\"password\" value\u003d\"${jdbc.password}\" /\u003e\n\t\t\u003c!-- relevant for single connection datasource and sqlite --\u003e\n\t\t\u003c!-- \u003cproperty name\u003d\"suppressClose\"\u003e \u003cvalue\u003etrue\u003c/value\u003e \u003c/property\u003e --\u003e\n\t\t\u003c!--\u003cproperty name\u003d\"initialSize\" value\u003d\"2\"/\u003e --\u003e\n\t\t\u003cproperty name\u003d\"maxTotal\" value\u003d\"4\" /\u003e\n\t\t\u003cproperty name\u003d\"maxIdle\" value\u003d\"2\" /\u003e\n\t\t\u003cproperty name\u003d\"minIdle\" value\u003d\"1\" /\u003e\n\t\t\u003cproperty name\u003d\"maxWaitMillis\" value\u003d\"15000\" /\u003e\n\t\t\u003c!--\u003cproperty name\u003d\"poolPreparedStatements\" value\u003d\"true\"/\u003e --\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"sqliteDataSource\"\n\t\tclass\u003d\"org.springframework.jdbc.datasource.SingleConnectionDataSource\"\n\t\tlazy-init\u003d\"true\"\u003e\n\t\t\u003cproperty name\u003d\"driverClassName\" value\u003d\"${jdbc.driverClassName}\" /\u003e\n\t\t\u003cproperty name\u003d\"url\" value\u003d\"${jdbc.url}\" /\u003e\n\t\t\u003cproperty name\u003d\"username\" value\u003d\"${jdbc.username}\" /\u003e\n\t\t\u003cproperty name\u003d\"password\" value\u003d\"${jdbc.password}\" /\u003e\n\t\t\u003cproperty name\u003d\"connectionProperties\"\u003e\n\t\t\t\u003cprops\u003e\n\t\t\t\t\u003cprop key\u003d\"date_string_format\"\u003eyyyy-MM-dd HH:mm:ss\u003c/prop\u003e\n\t\t\t\u003c/props\u003e\n\t\t\u003c/property\u003e\n\n\t\t\u003c!-- relevant for single connection datasource and sqlite --\u003e\n\t\t\u003cproperty name\u003d\"suppressClose\"\u003e\n\t\t\t\u003cvalue\u003etrue\u003c/value\u003e\n\t\t\u003c/property\u003e\n\t\t\u003c!--\u003cproperty name\u003d\"initialSize\" value\u003d\"2\"/\u003e --\u003e\n\t\t\u003c!--\u003cproperty name\u003d\"poolPreparedStatements\" value\u003d\"true\"/\u003e --\u003e\n\t\u003c/bean\u003e\n\n\t\u003c!-- to configure database for sqlite, mysql, etc. migrations --\u003e\n\t\u003cbean id\u003d\"flywayConfig\" class\u003d\"org.flywaydb.core.api.configuration.ClassicConfiguration\"\u003e\n\t\t\u003cproperty name\u003d\"baselineOnMigrate\" value\u003d\"true\" /\u003e\n\t\t\u003c!-- \u003cproperty name\u003d\"validateOnMigrate\" value\u003d\"false\" /\u003e --\u003e\n\t\t\u003c!-- \u003cproperty name\u003d\"cleanOnValidationError\" value\u003d\"true\" /\u003e --\u003e\n\t\t\u003cproperty name\u003d\"locations\" value\u003d\"#{\u0027${jdbc.schemaPath}\u0027.split(\u0027,\u0027)}\"/\u003e\n\t\t\u003c!-- \u003cproperty name\u003d\"dataSource\" ref\u003d\"dataSource\" /\u003e --\u003e\n\t\t\u003cproperty name\u003d\"dataSource\" ref\u003d\"sqliteDataSource\" /\u003e\n\t\t\u003cproperty name\u003d\"outOfOrder\" value\u003d\"true\"/\u003e\n\t\u003c/bean\u003e\n\t\n\t\u003cbean id\u003d\"flyway\" class\u003d\"org.flywaydb.core.Flyway\" init-method\u003d\"migrate\"\u003e\n\t\t\u003cconstructor-arg ref\u003d\"flywayConfig\"/\u003e\n\t\u003c/bean\u003e\n\n\n\t\u003cbean id\u003d\"kustvakt_db\" class\u003d\"de.ids_mannheim.korap.handlers.JDBCClient\"\u003e\n\t\t\u003cconstructor-arg index\u003d\"0\" ref\u003d\"dataSource\" /\u003e\n\t\t\u003c!-- deprecated property --\u003e\n\t\t\u003cproperty name\u003d\"database\" value\u003d\"${jdbc.database}\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"entityManagerFactory\"\n\t\tclass\u003d\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"\n\t\tdepends-on\u003d\"flyway\"\u003e\n\t\t\u003c!-- \u003cproperty name\u003d\"dataSource\" ref\u003d\"dataSource\" /\u003e --\u003e\n\t\t\u003cproperty name\u003d\"dataSource\" ref\u003d\"sqliteDataSource\" /\u003e\n\n\t\t\u003cproperty name\u003d\"packagesToScan\"\u003e\n\t\t\t\u003carray\u003e\n\t\t\t\t\u003cvalue\u003ede.ids_mannheim.korap.entity\u003c/value\u003e\n\t\t\t\t\u003cvalue\u003ede.ids_mannheim.korap.oauth2.entity\u003c/value\u003e\n\t\t\t\u003c/array\u003e\n\t\t\u003c/property\u003e\n\t\t\u003cproperty name\u003d\"jpaVendorAdapter\"\u003e\n\t\t\t\u003cbean id\u003d\"jpaVendorAdapter\"\n\t\t\t\tclass\u003d\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"\u003e\n\t\t\t\t\u003cproperty name\u003d\"databasePlatform\" value\u003d\"${hibernate.dialect}\" /\u003e\n\t\t\t\u003c/bean\u003e\n\t\t\u003c/property\u003e\n\t\t\u003cproperty name\u003d\"jpaProperties\"\u003e\n\t\t\t\u003cprops\u003e\n\t\t\t\t\u003cprop key\u003d\"hibernate.dialect\"\u003e${hibernate.dialect}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"hibernate.hbm2ddl.auto\"\u003e${hibernate.hbm2ddl.auto}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"hibernate.show_sql\"\u003e${hibernate.show_sql}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"hibernate.cache.use_query_cache\"\u003e${hibernate.cache.use_query_cache}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"hibernate.cache.use_second_level_cache\"\u003e${hibernate.cache.use_second_level_cache}\n\t\t\t\t\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"hibernate.cache.provider_class\"\u003e${hibernate.cache.provider}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"hibernate.cache.region.factory_class\"\u003e${hibernate.cache.region.factory}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"hibernate.jdbc.time_zone\"\u003e${hibernate.jdbc.time_zone}\u003c/prop\u003e\n\t\t\t\t\u003c!-- \u003cprop key\u003d\"net.sf.ehcache.configurationResourceName\"\u003eclasspath:ehcache.xml\u003c/prop\u003e --\u003e\n\t\t\t\u003c/props\u003e\n\t\t\u003c/property\u003e\n\t\u003c/bean\u003e\n\n\t\u003ctx:annotation-driven proxy-target-class\u003d\"true\"\n\t\ttransaction-manager\u003d\"transactionManager\" /\u003e\n\n\t\u003cbean id\u003d\"transactionManager\" class\u003d\"org.springframework.orm.jpa.JpaTransactionManager\"\u003e\n\t\t\u003cproperty name\u003d\"entityManagerFactory\" ref\u003d\"entityManagerFactory\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"transactionTemplate\"\n\t\tclass\u003d\"org.springframework.transaction.support.TransactionTemplate\"\u003e\n\t\t\u003cconstructor-arg ref\u003d\"transactionManager\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003c!-- Data access objects --\u003e\n\t\u003cbean id\u003d\"adminDao\" class\u003d\"de.ids_mannheim.korap.dao.AdminDaoImpl\" /\u003e\n\t\u003cbean id\u003d\"authorizationDao\" class\u003d\"de.ids_mannheim.korap.oauth2.dao.CachedAuthorizationDaoImpl\" /\u003e\n\n\t\u003c!-- Services --\u003e\n\t\u003cbean id\u003d\"scopeService\" class\u003d\"de.ids_mannheim.korap.oauth2.service.OAuth2ScopeServiceImpl\" /\u003e\n\t\n\t\u003c!-- props are injected from default-config.xml --\u003e\n\t\u003cbean id\u003d\"kustvakt_config\" class\u003d\"de.ids_mannheim.korap.config.FullConfiguration\"\u003e\n\t\t\u003cconstructor-arg name\u003d\"properties\" ref\u003d\"props\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"initializator\" class\u003d\"de.ids_mannheim.de.init.Initializator\"\n\t\tinit-method\u003d\"init\"\u003e\n\t\u003c/bean\u003e\n\t\n\t\u003c!-- Krill --\u003e\n\t\u003cbean id\u003d\"search_krill\" class\u003d\"de.ids_mannheim.korap.web.SearchKrill\"\u003e\n\t\t\u003cconstructor-arg value\u003d\"${krill.indexDir}\" /\u003e\n\t\u003c/bean\u003e\n\n    \u003c!-- Validator --\u003e\n\t\u003cbean id\u003d\"validator\" class\u003d\"de.ids_mannheim.korap.validator.ApacheValidator\"/\u003e\n\t\n\t\u003c!-- URLValidator --\u003e\n\t\u003cbean id\u003d\"redirectURIValidator\" class\u003d\"org.apache.commons.validator.routines.UrlValidator\"\u003e\n\t\t\u003cconstructor-arg value\u003d\"http,https\" index\u003d\"0\" /\u003e\n\t\t\u003cconstructor-arg index\u003d\"1\" type\u003d\"long\"\u003e\n\t\t\t\u003cutil:constant\n\t\t\t\tstatic-field\u003d\"org.apache.commons.validator.routines.UrlValidator.NO_FRAGMENTS\" /\u003e\n\t\t\u003c/constructor-arg\u003e\n\t\u003c/bean\u003e\n\t\u003cbean id\u003d\"urlValidator\" class\u003d\"org.apache.commons.validator.routines.UrlValidator\"\u003e\n\t\t\u003cconstructor-arg value\u003d\"http,https\" /\u003e\n\t\u003c/bean\u003e\n\t\n\t\u003c!-- Rewrite --\u003e\n\t\u003cbean id\u003d\"foundryRewrite\" class\u003d\"de.ids_mannheim.korap.rewrite.FoundryRewrite\"/\u003e\n\t\u003cbean id\u003d\"collectionRewrite\" class\u003d\"de.ids_mannheim.korap.rewrite.CollectionRewrite\"/\u003e\n\t\u003cbean id\u003d\"virtualCorpusRewrite\" class\u003d\"de.ids_mannheim.korap.rewrite.VirtualCorpusRewrite\"/\u003e\n \t\u003cbean id\u003d\"queryReferenceRewrite\" class\u003d\"de.ids_mannheim.korap.rewrite.QueryReferenceRewrite\"/\u003e\n\t\n\t\u003cutil:list id\u003d\"rewriteTasks\"\n\t\tvalue-type\u003d\"de.ids_mannheim.korap.rewrite.RewriteTask\"\u003e\n\t\t\u003cref bean\u003d\"foundryRewrite\" /\u003e\n\t\t\u003cref bean\u003d\"collectionRewrite\" /\u003e\n\t\t\u003cref bean\u003d\"virtualCorpusRewrite\" /\u003e\n    \u003cref bean\u003d\"queryReferenceRewrite\" /\u003e\n\t\u003c/util:list\u003e\n\t\n\t\u003cbean id\u003d\"rewriteHandler\" class\u003d\"de.ids_mannheim.korap.rewrite.RewriteHandler\"\u003e\n\t\t\u003cconstructor-arg ref\u003d\"rewriteTasks\"/\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"kustvakt_auditing\" class\u003d\"de.ids_mannheim.korap.handlers.JDBCAuditing\"\u003e\n\t\t\u003cconstructor-arg ref\u003d\"kustvakt_db\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"kustvaktResponseHandler\" class\u003d\"de.ids_mannheim.korap.web.KustvaktResponseHandler\"\u003e\n\t\t\u003cconstructor-arg index\u003d\"0\" name\u003d\"iface\" ref\u003d\"kustvakt_auditing\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003c!-- OAuth --\u003e\n\t\u003cbean id\u003d\"oauth2ResponseHandler\" class\u003d\"de.ids_mannheim.korap.web.OAuth2ResponseHandler\"\u003e\n\t\t\u003cconstructor-arg index\u003d\"0\" name\u003d\"iface\" ref\u003d\"kustvakt_auditing\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"mdGenerator\" class\u003d\"org.apache.oltu.oauth2.as.issuer.MD5Generator\"\u003e\n\t\u003c/bean\u003e\n\t\u003cbean id\u003d\"oauthIssuer\" class\u003d\"org.apache.oltu.oauth2.as.issuer.OAuthIssuerImpl\"\u003e\n\t\t\u003cconstructor-arg index\u003d\"0\" ref\u003d\"mdGenerator\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"kustvakt_userdb\" class\u003d\"de.ids_mannheim.korap.handlers.EntityDao\"\u003e\n\t\t\u003cconstructor-arg ref\u003d\"kustvakt_db\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean name\u003d\"kustvakt_encryption\" class\u003d\"de.ids_mannheim.korap.encryption.KustvaktEncryption\"\u003e\n\t\t\u003cconstructor-arg ref\u003d\"kustvakt_config\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003c!-- authentication providers to use --\u003e\n\t\u003c!-- \u003cbean id\u003d\"api_auth\" class\u003d\"de.ids_mannheim.korap.authentication.APIAuthentication\"\u003e \n\t\t\u003cconstructor-arg type\u003d\"de.ids_mannheim.korap.config.KustvaktConfiguration\" \n\t\tref\u003d\"kustvakt_config\" /\u003e \u003c/bean\u003e --\u003e\n\n\t\u003cbean id\u003d\"ldap_auth\" class\u003d\"de.ids_mannheim.korap.authentication.LdapAuth3\"\u003e\n\t\t\u003cconstructor-arg type\u003d\"de.ids_mannheim.korap.config.KustvaktConfiguration\"\n\t\t\tref\u003d\"kustvakt_config\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"basic_auth\"\n\t\tclass\u003d\"de.ids_mannheim.korap.authentication.BasicAuthentication\" /\u003e\n\n\n\t\u003cbean id\u003d\"session_auth\"\n\t\tclass\u003d\"de.ids_mannheim.korap.authentication.SessionAuthentication\"\u003e\n\t\t\u003cconstructor-arg type\u003d\"de.ids_mannheim.korap.config.KustvaktConfiguration\"\n\t\t\tref\u003d\"kustvakt_config\" /\u003e\n\t\t\u003cconstructor-arg type\u003d\"de.ids_mannheim.korap.interfaces.EncryptionIface\"\n\t\t\tref\u003d\"kustvakt_encryption\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"oauth2_auth\"\n\t\tclass\u003d\"de.ids_mannheim.korap.authentication.OAuth2Authentication\" /\u003e\n\t\n\t\u003cutil:list id\u003d\"kustvakt_authproviders\"\n\t\tvalue-type\u003d\"de.ids_mannheim.korap.interfaces.AuthenticationIface\"\u003e\n\t\t\u003cref bean\u003d\"basic_auth\" /\u003e\n\t\t\u003cref bean\u003d\"ldap_auth\" /\u003e\n\t\t\u003cref bean\u003d\"session_auth\" /\u003e\n\t\t\u003c!-- \u003cref bean\u003d\"api_auth\" /\u003e --\u003e\n\t\t\u003cref bean\u003d\"oauth2_auth\" /\u003e\n\t\u003c/util:list\u003e\n\n\n\t\u003cbean id\u003d\"userdata_details\" class\u003d\"de.ids_mannheim.korap.handlers.UserDetailsDao\"\u003e\n\t\t\u003cconstructor-arg ref\u003d\"kustvakt_db\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cbean id\u003d\"userdata_settings\" class\u003d\"de.ids_mannheim.korap.handlers.UserSettingsDao\"\u003e\n\t\t\u003cconstructor-arg ref\u003d\"kustvakt_db\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003cutil:list id\u003d\"kustvakt_userdata\"\n\t\tvalue-type\u003d\"de.ids_mannheim.korap.interfaces.db.UserdataDbIface\"\u003e\n\t\t\u003cref bean\u003d\"userdata_details\" /\u003e\n\t\t\u003cref bean\u003d\"userdata_settings\" /\u003e\n\t\u003c/util:list\u003e\n\n\t\u003c!-- specify type for constructor argument --\u003e\n\t\u003cbean id\u003d\"authenticationManager\"\n\t\tclass\u003d\"de.ids_mannheim.korap.authentication.KustvaktAuthenticationManager\"\u003e\n\t\t\u003cconstructor-arg type\u003d\"de.ids_mannheim.korap.interfaces.EntityHandlerIface\"\n\t\t\tref\u003d\"kustvakt_userdb\" /\u003e\n\t\t\u003cconstructor-arg type\u003d\"de.ids_mannheim.korap.interfaces.EncryptionIface\"\n\t\t\tref\u003d\"kustvakt_encryption\" /\u003e\n\t\t\u003cconstructor-arg ref\u003d\"kustvakt_config\" /\u003e\n\t\t\u003cconstructor-arg type\u003d\"de.ids_mannheim.korap.interfaces.db.AuditingIface\"\n\t\t\tref\u003d\"kustvakt_auditing\" /\u003e\n\t\t\u003cconstructor-arg ref\u003d\"kustvakt_userdata\" /\u003e\n\t\t\u003c!-- inject authentication providers to use --\u003e\n\t\t\u003cproperty name\u003d\"providers\" ref\u003d\"kustvakt_authproviders\" /\u003e\n\t\u003c/bean\u003e\n\t\n\t\u003c!-- todo: if db interfaces not loaded via spring, does transaction even \n\t\twork then? --\u003e\n\t\u003c!-- the transactional advice (i.e. what \u0027happens\u0027; see the \u003caop:advisor/\u003e \n\t\tbean below) --\u003e\n\t\u003ctx:advice id\u003d\"txAdvice\" transaction-manager\u003d\"txManager\"\u003e\n\t\t\u003c!-- the transactional semantics... --\u003e\n\t\t\u003ctx:attributes\u003e\n\t\t\t\u003c!-- all methods starting with \u0027get\u0027 are read-only --\u003e\n\t\t\t\u003ctx:method name\u003d\"get*\" read-only\u003d\"true\" rollback-for\u003d\"KorAPException\" /\u003e\n\t\t\t\u003c!-- other methods use the default transaction settings (see below) --\u003e\n\t\t\t\u003ctx:method name\u003d\"*\" rollback-for\u003d\"KorAPException\" /\u003e\n\t\t\u003c/tx:attributes\u003e\n\t\u003c/tx:advice\u003e\n\n\t\u003c!-- ensure that the above transactional advice runs for any execution of \n\t\tan operation defined by the service interface --\u003e\n\t\u003caop:config\u003e\n\t\t\u003caop:pointcut id\u003d\"service\"\n\t\t\texpression\u003d\"execution(* de.ids_mannheim.korap.interfaces.db.*.*(..))\" /\u003e\n\t\t\u003caop:advisor advice-ref\u003d\"txAdvice\" pointcut-ref\u003d\"service\" /\u003e\n\t\u003c/aop:config\u003e\n\n\t\u003c!-- similarly, don\u0027t forget the PlatformTransactionManager --\u003e\n\t\u003cbean id\u003d\"txManager\"\n\t\tclass\u003d\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"\u003e\n\t\t\u003c!-- \u003cproperty name\u003d\"dataSource\" ref\u003d\"dataSource\" /\u003e --\u003e\n\t\t\u003cproperty name\u003d\"dataSource\" ref\u003d\"sqliteDataSource\" /\u003e\n\t\u003c/bean\u003e\n\n\t\u003c!-- mail --\u003e\n\t\u003cbean id\u003d\"authenticator\" class\u003d\"de.ids_mannheim.korap.service.MailAuthenticator\"\u003e\n\t\t\u003cconstructor-arg index\u003d\"0\" value\u003d\"${mail.username}\" /\u003e\n\t\t\u003cconstructor-arg index\u003d\"1\" value\u003d\"${mail.password}\" /\u003e\n\t\u003c/bean\u003e\n\t\u003cbean id\u003d\"smtpSession\" class\u003d\"javax.mail.Session\" factory-method\u003d\"getInstance\"\u003e\n\t\t\u003cconstructor-arg index\u003d\"0\"\u003e\n\t\t\t\u003cprops\u003e\n\t\t\t\t\u003cprop key\u003d\"mail.smtp.submitter\"\u003e${mail.username}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"mail.smtp.auth\"\u003e${mail.auth}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"mail.smtp.host\"\u003e${mail.host}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"mail.smtp.port\"\u003e${mail.port}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"mail.smtp.starttls.enable\"\u003e${mail.starttls.enable}\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"mail.smtp.connectiontimeout\"\u003e${mail.connectiontimeout}\u003c/prop\u003e\n\t\t\t\u003c/props\u003e\n\t\t\u003c/constructor-arg\u003e\n\t\t\u003cconstructor-arg index\u003d\"1\" ref\u003d\"authenticator\" /\u003e\n\t\u003c/bean\u003e\n\t\u003cbean id\u003d\"mailSender\" class\u003d\"org.springframework.mail.javamail.JavaMailSenderImpl\"\u003e\n\t\t\u003cproperty name\u003d\"username\" value\u003d\"${mail.username}\" /\u003e\n\t\t\u003cproperty name\u003d\"password\" value\u003d\"${mail.password}\" /\u003e\n\t\t\u003cproperty name\u003d\"session\" ref\u003d\"smtpSession\" /\u003e\n\t\u003c/bean\u003e\n\t\u003cbean id\u003d\"velocityEngine\" class\u003d\"org.apache.velocity.app.VelocityEngine\"\u003e\n\t\t\u003cconstructor-arg index\u003d\"0\"\u003e\n\t\t\t\u003cprops\u003e\n\t\t\t\t\u003cprop key\u003d\"resource.loader\"\u003eclass\u003c/prop\u003e\n\t\t\t\t\u003cprop key\u003d\"class.resource.loader.class\"\u003eorg.apache.velocity.runtime.resource.loader.ClasspathResourceLoader\n\t\t\t\t\u003c/prop\u003e\n\t\t\t\u003c/props\u003e\n\t\t\u003c/constructor-arg\u003e\n\t\u003c/bean\u003e\n\u003c/beans\u003e",
      "revId": "44e8eafca52d5e54896a3371c6f60c769bbee444",
      "serverId": "626241b7-b7d0-4197-b843-1ee23887649c"
    }
  ]
}